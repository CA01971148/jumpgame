(()=>{"use strict";var t={d:(e,i)=>{for(var n in i)t.o(i,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:i[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};t.d({},{JQ:()=>l,Jy:()=>p,QB:()=>d,tw:()=>m,zE:()=>y});var e,i=function(){function t(e,i){void 0===i&&(i=t.defaultWidth),this._x=0,this._y=0,this._height=0,this._width=t.defaultWidth,this.level=e,this.IDName="scaffold"+String(this.level),this.createCSSRule(),this.height=this.level*t.scaffoldDistance,0===this.level?(this.width=l.width,this.x=0):(this.width=i,this.x=Math.random()*-(l.width-this.width)+(l.width-this.width)/2)}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!1,configurable:!0}),t.prototype.createCSSRule=function(){var t="#"+this.IDName+"{position: absolute;object-fit: none;z-index: 1;top: 0px;left: 0px;width: 150px;height: 20px;}";y.insertRule(t,y.cssRules.length)},t.prototype.scrole=function(){document.getElementById(this.IDName).style.left=this.x+l.width/2-this.width/2+"px",this.y=t.firstHeight+t.scaffoldDistance*this.level,this.height=t.scaffoldDistance*this.level,document.getElementById(this.IDName).style.top=l.height-this.y+"px"},t.firstHeight=50,t.defaultWidth=150,t.thickness=20,t.scaffoldDistance=200,t}(),n=function(){function t(){this.characterSize=50,this.footSize=20,this._x=0,this._y=i.firstHeight,this.height=0,this._dx=0,this.moveVelocity=5,this.dxMax=10,this._dy=0,this.dyMax=10,this._jumpVelocity=0,this.jumpChargeAmount=1,this.jumpChargeMax=25,this.fallVelocitiy=1,this.isOnGround=!0,this.isSlip=!1,this.isCarry=!1,this.isOnMoving=!1,this.heightSize=this.characterSize}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){t<-l.width/2?this._x=l.width/2:t>l.width/2?this._x=-l.width/2:this._x=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dx",{get:function(){return this._dx},set:function(t){t>this.dxMax?this._dx=this.dxMax:t<-this.dxMax?this._dx=-this.dxMax:this._dx=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dy",{get:function(){return this._dy},set:function(t){this._dy=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"jumpVelocity",{get:function(){return this._jumpVelocity},set:function(t){t>this.jumpChargeMax?this._jumpVelocity=this.jumpChargeMax:this._jumpVelocity=t},enumerable:!1,configurable:!0}),t.prototype.move=function(){this.x+=this.dx,this.checkAboveScaffold()&&this.height+this.dy<this.currentScaffold().height?(this.y=this.currentScaffold().y,this.height=this.currentScaffold().height):(this.y+=this.dy,this.height+=this.dy),!1===this.isOnGround?this.dy-=this.fallVelocitiy:this.dy<0&&(this.dy=0),!1===this.isSlip||this.dx<this.moveVelocity&&this.dx>-this.moveVelocity?this.dx=0:this.dx*=.95,document.getElementById("character").style.left=this.x+l.width/2-this.characterSize/2+"px",document.getElementById("character").style.top=l.height-(this.y+this.heightSize)+"px",this.isOnGround=this.checkOnGround()},t.prototype.currentScaffold=function(){return m[Math.floor(this.height/i.scaffoldDistance)]},t.prototype.checkAboveScaffold=function(){return this.x-this.footSize/2<=this.currentScaffold().width/2+this.currentScaffold().x&&this.x+this.footSize/2>=-this.currentScaffold().width/2+this.currentScaffold().x},t.prototype.checkOnGround=function(){return!(this.height!==this.currentScaffold().height||!this.checkAboveScaffold())},t.prototype.moveLeft=function(){!1===this.isOnGround&&(this.dx-=this.moveVelocity),document.getElementById("character").style.transform="rotateY(0deg)"},t.prototype.moveRight=function(){!1===this.isOnGround&&(this.dx+=this.moveVelocity),document.getElementById("character").style.transform="rotateY(180deg)"},t.prototype.jumpCharge=function(){this.jumpVelocity+=this.jumpChargeAmount;var t=this.characterSize*((this.jumpChargeMax-this.jumpVelocity)/this.jumpChargeMax);this.heightSize=t<10?10:t,document.getElementById("character").style.height=this.heightSize+"px"},t.prototype.jump=function(){this.heightSize=this.characterSize,!0===this.isOnGround&&(this.dy+=this.jumpVelocity),this.jumpVelocity=0,document.getElementById("character").style.height=this.characterSize+"px"},t}(),r=(e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},e(t,i)},function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),o=function(t){function e(){var e=t.call(this)||this;return document.write('<img id="character" src="./../resource/rabbit.png">'),document.getElementById("character").style.width=e.characterSize+"px",document.getElementById("character").style.height=e.characterSize+"px",e}return r(e,t),e}(n),h=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),s=function(t){function e(e){var i=t.call(this)||this;return i.IDname=e,i.createCSSRule(),document.write('<img id="'+i.IDname+'" src="./../resource/rabbit.png">'),i}return h(e,t),e.prototype.createCSSRule=function(){var t="#"+this.IDname+"{position: absolute;z-index: 2;top: 0px;left: 0px;transform: rotateY(0deg);filter: saturate(1);width: 50px;height: 50px;}";y.insertRule(t,y.cssRules.length)},e.prototype.load=function(t){document.getElementById(this.IDname).style.width=document.getElementById("character").style.width,document.getElementById(this.IDname).style.height=document.getElementById("character").style.height;var e=d.x+l.width/2-d.characterSize/2;document.getElementById(this.IDname).style.left=String(e+t*l.width)+"px",document.getElementById(this.IDname).style.top=document.getElementById("character").style.top,document.getElementById(this.IDname).style.transform=document.getElementById("character").style.transform},e}(n),c=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),u=function(t){function e(e,n){void 0===n&&(n=i.defaultWidth);var r=t.call(this,e,n)||this;return document.write('<img id="'+r.IDName+'" src="./../resource/normalScaffold.jpg">'),document.getElementById(r.IDName).style.width=r.width+"px",document.getElementById(r.IDName).style.height=i.thickness+"px",r}return c(e,t),e}(i),a=function(){function t(){this.key_left=!1,this.key_right=!1,this.key_jump=!1}return t.prototype.keyDownFunc=function(t){switch(t.keyCode){case 65:this.key_left=!0,p.key_left=this.key_left;break;case 68:this.key_right=!0,p.key_right=this.key_right;break;case 32:this.key_jump=!0,p.key_jump=this.key_jump}},t.prototype.keyUpFunc=function(t){switch(t.keyCode){case 65:this.key_left=!1,p.key_left=this.key_left;break;case 68:this.key_right=!1,p.key_right=this.key_right;break;case 32:this.key_jump=!1,p.key_jump=this.key_jump,d.jump()}},t}(),l=function(){function t(){}return t.width=360,t.height=640,t}(),y=document.styleSheets.item(0),d=new o,f=new Array;f[0]=new s("rabbit_L"),f[1]=new s("rabbit_R");var p=new a,m=new Array;m[0]=new u(0);for(var g=1;g<4;g++)m[g]=new u(g,100*Math.random()+50);requestAnimationFrame((function t(){addEventListener("keydown",p.keyDownFunc),addEventListener("keyup",p.keyUpFunc),!0===p.key_left&&!1===p.key_right&&d.moveLeft(),!0===p.key_right&&!1===p.key_left&&d.moveRight(),!0===p.key_jump&&d.jumpCharge(),document.getElementById("sampleArea").innerHTML="rabbit_L:"+document.getElementById("rabbit_L").style.left,document.getElementById("sampleArea2").innerHTML="rabbit_R:"+document.getElementById("rabbit_R").style.left,d.move(),f[0].load(-1),f[1].load(1);for(var e=0;e<m.length;e++)m[e].scrole();requestAnimationFrame(t)}))})();